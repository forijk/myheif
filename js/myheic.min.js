function myReplace(t){fetch(t.dataset.src).then(e=>e.blob()).then(e=>heic2any({blob:e,toType:"image/jpeg",quality:.92,signature:t.title})).then(e=>{t.src=URL.createObjectURL(e),t.title="Decoded from heic/heif\nClick to toggle zoom of:\n"+t.dataset.src,t.onclick=function(e){t.classList.toggle("zoomed-out"),t.classList.toggle("zoomed-in")},console.log("+++ .then - fetched and decoded: "+t.dataset.src)}).catch(e=>{console.error("*** .catch - fetching/decoding error heic/heif: "+t.dataset.src),console.error(e),t.src||(t.src="images/HeifHeicError.png",t.title="images/HeifHeicError.png")})}function getCanvasFromImage(e){const t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;const c=t.getContext("2d");return c.drawImage(e,0,0),t}function getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}window.onload=function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++)e[t].dataset.src?".heic"==e[t].dataset.src.substr(-5,5).toLowerCase()||".heif"==e[t].dataset.src.substr(-5,5).toLowerCase()?myReplace(e[t]):(console.error("*** not heic/heif extension but used data-src... simply replacing src with data-src: "+e[t].dataset.src),e[t].src=e[t].dataset.src,e[t].title=e[t].dataset.src):e[t].src&&(".heic"==e[t].src.substr(-5,5).toLowerCase()||".heif"==e[t].src.substr(-5,5).toLowerCase()?e[t].dataset.src=e[t].src:e[t].dataset.src=e[t].src+".heic",myReplace(e[t]))};
